---
version: 1
interactions:
- request:
    body: |
      {"filter":{"query":"query"},"is_enabled":true,"name":"go-client-test-pipeline-1588269419","processors":[{"grok":{"match_rules":"rule1 foo\nrule2 bar","support_rules":"support baz"},"is_enabled":false,"name":"grok parser","samples":["sample"],"source":"src","type":"grok-parser"},{"is_enabled":false,"name":"log date remapper","sources":["source"],"type":"date-remapper"},{"is_enabled":false,"name":"log status remapper","sources":["source"],"type":"status-remapper"},{"is_enabled":false,"name":"service remapper","sources":["source"],"type":"service-remapper"},{"is_enabled":false,"name":"log message remapper","sources":["source"],"type":"message-remapper"},{"is_enabled":false,"name":"log message remapper","override_on_conflict":true,"preserve_source":true,"source_type":"tag","sources":["source"],"target":"target","target_type":"tag","type":"attribute-remapper"},{"is_enabled":false,"name":"URL parser","normalize_ending_slashes":false,"sources":["source"],"target":"target","type":"url-parser"},{"is_enabled":false,"is_encoded":true,"name":"user agent parser","sources":["source"],"target":"target","type":"user-agent-parser"},{"categories":[{"filter":{"query":"query"},"name":"category"}],"is_enabled":false,"name":"category processor","target":"target","type":"category-processor"},{"expression":"foo + bar","is_enabled":false,"is_replace_missing":true,"name":"arithmetic processor","target":"target","type":"arithmetic-processor"},{"is_enabled":false,"is_replace_missing":true,"name":"string builder processor","target":"target","template":"template","type":"string-builder-processor"},{"is_enabled":false,"name":"geo IP parser","sources":["source"],"target":"target","type":"geo-ip-parser"},{"default_lookup":"default_lookup","is_enabled":false,"lookup_table":["key,value"],"name":"lookup processor","source":"source","target":"target","type":"lookup-processor"},{"is_enabled":false,"name":"trace remapper","sources":["source"],"type":"trace-id-remapper"},{"filter":{"query":"query"},"is_enabled":false,"name":"Test","processors":[{"grok":{"match_rules":"rule1 foo\nrule2 bar","support_rules":"support baz"},"is_enabled":false,"name":"grok parser","samples":["sample"],"source":"src","type":"grok-parser"},{"is_enabled":false,"name":"log date remapper","sources":["source"],"type":"date-remapper"}],"type":"pipeline"}]}
    form: {}
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      Dd-Operation-Id:
      - CreateLogsPipeline
      User-Agent:
      - datadog-api-client-go/1.0.0-beta.1+dev.1 (go go1.13.4; os darwin; arch amd64)
      X-Datadog-Parent-Id:
      - "8605377419020200351"
      X-Datadog-Sampling-Priority:
      - "1"
      X-Datadog-Trace-Id:
      - "25082008154375994"
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: POST
  response:
    body: '{"id":"Gl0i6IpdS7m4Mx8pb4rYcg","type":"pipeline","name":"go-client-test-pipeline-1588269419","is_enabled":true,"is_read_only":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"},{"name":"log
      status remapper","is_enabled":false,"sources":["source"],"type":"status-remapper"},{"name":"service
      remapper","is_enabled":false,"sources":["source"],"type":"service-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"type":"message-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"source_type":"tag","target":"target","target_type":"tag","preserve_source":true,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"URL
      parser","is_enabled":false,"sources":["source"],"target":"target","normalize_ending_slashes":false,"type":"url-parser"},{"name":"user
      agent parser","is_enabled":false,"sources":["source"],"target":"target","is_encoded":true,"type":"user-agent-parser"},{"name":"category
      processor","is_enabled":false,"categories":[{"filter":{"query":"query"},"name":"category"}],"target":"target","type":"category-processor"},{"name":"arithmetic
      processor","is_enabled":false,"expression":"foo + bar","target":"target","is_replace_missing":true,"type":"arithmetic-processor"},{"name":"string
      builder processor","is_enabled":false,"template":"template","target":"target","is_replace_missing":true,"type":"string-builder-processor"},{"name":"geo
      IP parser","is_enabled":false,"sources":["source"],"target":"target","ip_processing_behavior":"do-nothing","type":"geo-ip-parser"},{"name":"lookup
      processor","is_enabled":false,"source":"source","target":"target","lookup_table":["key,value"],"default_lookup":"default_lookup","type":"lookup-processor"},{"name":"trace
      remapper","is_enabled":false,"sources":["source"],"type":"trace-id-remapper"},{"type":"pipeline","name":"Test","is_enabled":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"}]}]}'
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Disposition:
      - inline
      Content-Security-Policy:
      - frame-ancestors 'self'; report-uri https://api.datadoghq.com/csp-report
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Thu, 30 Apr 2020 17:56:59 GMT
      Dd-Pool:
      - dogweb
      Pragma:
      - no-cache
      Set-Cookie:
      - DD-PSHARD=233; Max-Age=604800; Path=/; expires=Thu, 07-May-2020 17:56:59 GMT;
        secure; HttpOnly
      Strict-Transport-Security:
      - max-age=15724800;
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Dd-Debug:
      - aiFdvD+ESSGWQuLeXGShIAaySBrTSq6aZf+crfPnDVFrMRUU9f0HobLUCBopvakz
      X-Dd-Version:
      - "35.2453376"
      X-Frame-Options:
      - SAMEORIGIN
      X-Ratelimit-Limit:
      - "100"
      X-Ratelimit-Period:
      - "3600"
      X-Ratelimit-Remaining:
      - "47"
      X-Ratelimit-Reset:
      - "181"
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
      Dd-Operation-Id:
      - ListLogsPipelines
      User-Agent:
      - datadog-api-client-go/1.0.0-beta.1+dev.1 (go go1.13.4; os darwin; arch amd64)
      X-Datadog-Parent-Id:
      - "5494884483159630593"
      X-Datadog-Sampling-Priority:
      - "1"
      X-Datadog-Trace-Id:
      - "25082008154375994"
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines
    method: GET
  response:
    body: '[{"id":"4I6FNy5GToqi2fKVAqNZJw","type":"pipeline","name":"Datadog Agent","is_enabled":true,"is_read_only":true,"filter":{"query":"source:agent"},"processors":[{"name":"Parsing
      Datadog Agent logs","is_enabled":true,"source":"message","samples":["2019-04-08
      13:53:48 UTC | CORE | INFO | (pkg/collector/runner/runner.go:264 in work) |
      Running check load","2019-04-08 13:53:48 UTC | TRACE | INFO | (pkg/trace/agent/agent.go:145
      in loop) | exiting","2019-02-01 16:59:41 UTC | INFO | (connection_manager.go:124
      in CloseConnection) | Connection closed","2019-02-01 16:58:54 UTC | INFO | (serializer.go:263
      in SendJSONToV1Intake) | Sent processes metadata payload, size: 1422 bytes."],"grok":{"support_rules":"","match_rules":"agent_rule
      %{date(\"yyyy-MM-dd HH:mm:ss z\"):timestamp} \\|\\s+%{notSpace:agent}\\s+\\|\\s+%{word:level}\\s+\\|\\s+\\(%{notSpace:filename}:%{number:lineno}
      in %{word:process}\\)\\s+\\|.*\n\nagent_rule_pre_611 %{date(\"yyyy-MM-dd HH:mm:ss
      z\"):timestamp} \\|\\s+%{word:level}\\s+\\|\\s+\\(%{notSpace:filename}:%{number:lineno}
      in %{word:process}\\)\\s+\\|.*\n"},"type":"grok-parser"},{"name":"Define timestamp
      as the official timestamp of the log","is_enabled":true,"sources":["timestamp"],"type":"date-remapper"},{"name":"Define
      level as the official log status","is_enabled":true,"sources":["level"],"type":"status-remapper"}]},{"id":"rTxbr2MpQsSCEtn66XmwnQ","type":"pipeline","name":"python","is_enabled":true,"is_read_only":true,"filter":{"query":"source:python"},"processors":[{"name":"Parsing
      python default format","is_enabled":true,"source":"message","samples":["2017-12-19T14:37:58,995
      INFO  [process.name] [20081] this is my python log","2019-01-07 15:20:15,972
      DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031 dd.span_id=4663104081780224235]
      - Hook: teardown_appcontext","2020-03-20 14:15:07,124 INFO [root] [app.py:78]
      [dd.service=excelsior dd.env=prod dd.version=abc123 dd.trace_id=9659687005038611690
      dd.span_id=6632586210846541907] - This is a test of info logs"],"grok":{"support_rules":"_datadog_prefix
      %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp} %{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{notSpace:filename}:%{number:lineno}\\]\\s+\\[%{data::keyvalue}dd.trace_id=%{word:dd.trace_id}
      dd.span_id=%{word:dd.span_id}\\] -\n\n_python_prefix %{date(\"yyyy-MM-dd''T''HH:mm:ss'',''SSS\"):timestamp}\\s+%{word:levelname}\\s+\\[%{notSpace:process.name}\\]\\s+\\[%{integer:process.id}\\]\n","match_rules":"traceback_format
      (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}Traceback \\(most
      recent call last\\):(?s)\\s*%{data:error.stack}\n\npython_format (%{_python_prefix}|%{_datadog_prefix})\\s+%{data::keyvalue}\n\npython_fallback
      %{date(\"yyyy-MM-dd''T''HH:mm:ss'',''SSS\"):timestamp}\\s+%{word:levelname}\\s+%{data::keyvalue}((\\n|\\t)%{data:error.stack})?\n\n#Samples\n#2017-12-19T14:37:58,995
      INFO  [process.name] [20081] this is my python log\n\n# Datadog format\n#2019-01-07
      15:20:15,972 DEBUG [flask.app] [app.py:100] [dd.trace_id=5688176451479556031
      dd.span_id=4663104081780224235] - Hook: teardown_appcontext\n"},"type":"grok-parser"},{"name":"Define
      timestamp as the official timestamp of the log","is_enabled":true,"sources":["timestamp"],"type":"date-remapper"},{"name":"Define
      level as the official status of the log","is_enabled":true,"sources":["levelname"],"type":"status-remapper"},{"name":"traceback
      to error.stack","is_enabled":true,"sources":["traceback"],"source_type":"attribute","target":"error.stack","target_type":"attribute","preserve_source":false,"override_on_conflict":false,"type":"attribute-remapper"},{"name":"name
      to logger.name","is_enabled":true,"sources":["name"],"source_type":"attribute","target":"logger.name","target_type":"attribute","preserve_source":false,"override_on_conflict":false,"type":"attribute-remapper"},{"name":"threadName
      to logger.thread_name","is_enabled":true,"sources":["threadName"],"source_type":"attribute","target":"logger.thread_name","target_type":"attribute","preserve_source":false,"override_on_conflict":false,"type":"attribute-remapper"},{"name":"Parsing
      python traceback","is_enabled":true,"source":"error.stack","samples":[],"grok":{"support_rules":"","match_rules":"parsing_traceback
      File \"%{notSpace:filename}\", line %{integer:lineno}.*\\s+%{regex(\"[a-zA-Z]*Error[a-zA-Z]*\"):error.kind}:
      %{data:error.message}\n"},"type":"grok-parser"},{"name":"Define dd.trace_id
      as the official trace id associated to this log","is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper"},{"name":"Set
      the datadog environemnt tag","is_enabled":true,"sources":["dd.env"],"source_type":"attribute","target":"env","target_type":"tag","preserve_source":false,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"Set
      the datadog version tag","is_enabled":true,"sources":["dd.version"],"source_type":"attribute","target":"version","target_type":"tag","preserve_source":false,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"Define
      app as the official service of the log","is_enabled":true,"sources":["dd.service"],"type":"service-remapper"}]},{"id":"JW6WRX6zSYO6P27n-R85vw","type":"pipeline","name":"Java","is_enabled":true,"is_read_only":true,"filter":{"query":"source:java"},"processors":[{"name":"Parsing
      Java Default formats","is_enabled":true,"source":"message","samples":["2000-09-07
      14:07:41,508 [main] INFO  MyApp - Entering application.","54 [main] INFO MyApp.foo.bar
      - Entering application.","2000-09-07 14:07:44 INFO org.foo.bar:32 - Entering
      application.","2000-09-07 14:07:44.452 [main] INFO org.foo.bar - Entering application."],"grok":{"support_rules":"_date
      %{date(\"yyyy-MM-dd HH:mm:ss\"):timestamp}\n_date_ms %{date(\"yyyy-MM-dd HH:mm:ss,SSS\"):timestamp}\n_date_slf4j
      %{date(\"yyyy-MM-dd HH:mm:ss.SSS\"):timestamp}\n_duration %{integer:duration}\n_thread_name
      %{notSpace:logger.thread_name}\n_status %{word:level}\n_logger_name %{notSpace:logger.name}\n_context
      %{notSpace:logger.context}\n_line %{integer:line}\n","match_rules":"java_default
      (%{_date_ms}|%{_duration})\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?-
      (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_slf4j
      %{_date_slf4j}\\s+\\[%{_thread_name}\\]\\s+%{_status}\\s+%{_logger_name}\\s*(%{_context}\\s*)?-
      (?>%{word:dd.trace_id} %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_log4j
      %{_date} %{_status}\\s+%{_logger_name}:%{_line}\\s+- (?>%{word:dd.trace_id}
      %{word:dd.span_id} - )?%{data:message}((\\n|\\t)%{data:error.stack})?\n\njava_fallback
      (%{_date}|%{_date_ms}) %{_status}\\s+(?>%{word:dd.trace_id} %{word:dd.span_id}
      )?%{data:message}((\\n|\\t)%{data:error.stack})?\n"},"type":"grok-parser"},{"name":"Parsing
      GC logs","is_enabled":true,"source":"message","samples":["[9237.485s][info   ][gc]
      GC(835) Pause Young (G1 Evacuation Pause) 4937M->645M(7168M) 17.476ms","2019-03-20T14:36:30.111+0000:
      41.098: [GC concurrent-mark-end, 0.0272767 secs]","2019-03-20T14:36:30.111+0000:
      41.071: [GC concurrent-mark-start]","2019-03-20T14:36:30.111+0000: 41.099: [Finalize
      Marking, 0.0011661 secs]"],"grok":{"support_rules":"_gc_event_phase_duration
      %{date(\"yyyy-MM-dd''T''HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\n_parallel
      \\[Parallel\\sTime:\\s%{number:parallel_time}\\sms,\\sGC\\sWorkers:\\s%{number:gc_worker.count}]\n\n_gc_worker_start
      \\[GC\\sWorker\\sStart\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.start.min},\\sAvg:\\s%{number:gc_worker.start.avg},\\sMax:\\s%{number:gc_worker.start.max},\\sDiff:\\s%{number:gc_worker.start.diff}]\n\n_ext_root_scanning
      \\[Ext\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:exit_root_scanning.min},\\sAvg:\\s%{number:exit_root_scanning.avg},\\sMax:\\s%{number:exit_root_scanning.max},\\sDiff:\\s%{number:exit_root_scanning.diff},\\sSum:\\s%{number:exit_root_scanning.sum}]\n\n_update_rs
      \\[Update\\sRS\\s\\(ms\\):\\sMin:\\s%{number:update_rs.min},\\sAvg:\\s%{number:update_rs.avg},\\sMax:\\s%{number:update_rs.max},\\sDiff:\\s%{number:update_rs.diff},\\sSum:\\s%{number:update_rs.sum}]\n\n_gcc_event
      %{date(\"yyyy-MM-dd''T''HH:mm:ss.SSSZ\"):timestamp}:%{notSpace}\\s\\[%{regex(\"([^\\\\]]*)\"):event.type}]\n\n_processed_buffer
      \\[Processed\\sBuffers:\\sMin:\\s%{number:processed_buffer.min},\\sAvg:\\s%{number:processed_buffer.avg},\\sMax:\\s%{number:processed_buffer.max},\\sDiff:\\s%{number:processed_buffer.diff},\\sSum:\\s%{number:processed_buffer.sum}]\n\n_scan_rs
      \\[Scan\\sRS\\s\\(ms\\):\\sMin:\\s%{number:scan_rs.min},\\sAvg:\\s%{number:scan_rs.avg},\\sMax:\\s%{number:scan_rs.max},\\sDiff:\\s%{number:scan_rs.diff},\\sSum:\\s%{number:scan_rs.sum}]\n\n_code_root_scan
      \\[Code\\sRoot\\sScanning\\s\\(ms\\):\\sMin:\\s%{number:code_root.scan.min},\\sAvg:\\s%{number:code_root.scan.avg},\\sMax:\\s%{number:code_root.scan.max},\\sDiff:\\s%{number:code_root.scan.diff},\\sSum:\\s%{number:code_root.scan.sum}]\n\n_object_copy
      \\[Object\\sCopy\\s\\(ms\\):\\sMin:\\s%{number:object_copy.min},\\sAvg:\\s%{number:object_copy.avg},\\sMax:\\s%{number:object_copy.max},\\sDiff:\\s%{number:object_copy.diff},\\sSum:\\s%{number:object_copy.sum}]\n\n_termination
      \\[Termination\\s\\(ms\\):\\sMin:\\s%{number:termination.min},\\sAvg:\\s%{number:termination.avg},\\sMax:\\s%{number:termination.max},\\sDiff:\\s%{number:termination.diff},\\sSum:\\s%{number:termination.sum}]\n\n_termination_attempts
      \\[Termination\\sAttempts:\\sMin:\\s%{number:termination.attempts.min},\\sAvg:\\s%{number:termination.attempts.avg},\\sMax:\\s%{number:termination.attempts.max},\\sDiff:\\s%{number:termination.attempts.diff},\\sSum:\\s%{number:termination.attempts.sum}]\n\n_gc_worker_other
      \\[GC\\sWorker\\sOther\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.other.min},\\sAvg:\\s%{number:gc_worker.other.avg},\\sMax:\\s%{number:gc_worker.other.max},\\sDiff:\\s%{number:gc_worker.other.diff},\\sSum:\\s%{number:gc_worker.other.sum}]\n\n_gc_worker_total
      \\[GC\\sWorker\\sTotal\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.total.min},\\sAvg:\\s%{number:gc_worker.total.avg},\\sMax:\\s%{number:gc_worker.total.max},\\sDiff:\\s%{number:gc_worker.total.diff},\\sSum:\\s%{number:gc_worker.total.sum}]\n\n_gc_worker_end
      \\[GC\\sWorker\\sEnd\\s\\(ms\\):\\sMin:\\s%{number:gc_worker.end.min},\\sAvg:\\s%{number:gc_worker.end.avg},\\sMax:\\s%{number:gc_worker.end.max},\\sDiff:\\s%{number:gc_worker.end.diff}]\n\n_code_root_fixup
      \\[Code\\sRoot\\sFixup:\\s%{number:code_root.fixup}\\sms]\n\n_code_root_purge
      \\[Code\\sRoot\\sPurge:\\s%{number:code_root.purge}\\sms]\n\n_clear_ct \\[Clear\\sCT:\\s%{number:clear_ct}\\sms]\n\n_other
      \\[Other:\\s%{number:other}\\sms]\n\n_choose_cset \\[Choose\\sCSet:\\s%{number:choose_cset}\\sms]\n\n_ref_proc
      \\[Ref\\sProc:\\s%{number:ref.proc}\\sms]\n\n_ref_enq \\[Ref\\sEnq:\\s%{number:ref.enq}\\sms]\n\n_redirty_cards
      \\[Redirty\\sCards:\\s%{number:redirty_cards}\\sms]\n\n_humongous_register \\[Humongous\\sRegister:\\s%{number:humongous_register}\\sms]\n\n_humongous_reclaim
      \\[Humongous\\sReclaim:\\s%{number:humongous_reclaim}\\sms]\n\n_free \\[Free\\sCSet:\\s%{number:free}\\sms]\n\n_memory_usage
      \\[Eden: (%{number:eden.memory_before}M|%{number:eden.memory_before:scale(1000)}G)\\((%{number:eden.memory_allocated_before}M|%{number:eden.memory_allocated_before:scale(1000)}G)\\)->%{number:eden.memory_after}B\\((%{number:eden.memory_allocated_after}M|%{number:eden.memory_allocated_after:scale(1000)}G)\\)\\sSurvivors:\\s%{number:survivor.memory_before}M->%{number:survivor.memory_after}M\\sHeap:\\s(%{number:heap.memory_before}M|%{number:heap.memory_before:scale(1000)}G)\\((%{number:heap.memory_allocated_before}M|%{number:heap.memory_allocated_before:scale(1000)}G)\\)->%{number:heap.memory_after}M\\((%{number:heap.memory_allocated_after}M|%{number:heap.memory_allocated_after:scale(1000)}G)\\)]\n\n_times
      \\[Times:\\suser=%{number:times.user}\\ssys=%{number:times.system},\\sreal=%{number:times.real}\\ssecs]\n","match_rules":"\ngc_nonverbose_basic
      \\[%{notSpace}\\]\\[%{word:level}\\s*\\]\\[%{word:gc.type}\\] GC\\(%{number:gc.iteration}\\)
      %{data:gc.action} \\(%{data:gc.phase}\\) %{number:heap.memory_before}M\\-\\>%{number:heap.memory_after}M\\(%{number:heap.memory_total}M\\)
      %{number:duration:scale(1000000)}ms\n\ngc_action_phase_duration %{date(\"yyyy-MM-dd''T''HH:mm:ss.SSSZ\"):timestamp}:
      %{notSpace}\\s\\[GC\\s%{notSpace:gc.action}(\\s%{regex(\"([^,]*)\"):gc.phase},)?(\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\nnon_gc_action_duration
      %{date(\"yyyy-MM-dd''T''HH:mm:ss.SSSZ\"):timestamp}: %{notSpace}\\s\\[%{regex(\"([^,]*)\"):gc.action}(,\\s%{number:duration:scale(1000000000)}\\ssecs)?]\n\ngc_verbose
      %{_gc_event_phase_duration}(\\r|\\n|\\s)*%{_parallel}(\\r|\\n|\\s)*%{_gc_worker_start}(\\r|\\n|\\s)*%{_ext_root_scanning}(\\r|\\n|\\s)*%{_update_rs}(\\r|\\n|\\s)*%{_processed_buffer}(\\r|\\n|\\s)*%{_scan_rs}(\\r|\\n|\\s)*%{_code_root_scan}(\\r|\\n|\\s)*%{_object_copy}(\\r|\\n|\\s)*%{_termination}(\\r|\\n|\\s)*%{_termination_attempts}(\\r|\\n|\\s)*%{_gc_worker_other}(\\r|\\n|\\s)*%{_gc_worker_total}(\\r|\\n|\\s)*%{_gc_worker_end}(\\r|\\n|\\s)*%{_code_root_fixup}(\\r|\\n|\\s)*%{_code_root_purge}(\\r|\\n|\\s)*%{_clear_ct}(\\r|\\n|\\s)*%{_other}(\\r|\\n|\\s)*%{_choose_cset}(\\r|\\n|\\s)*%{_ref_proc}(\\r|\\n|\\s)*%{_ref_enq}(\\r|\\n|\\s)*%{_redirty_cards}(\\r|\\n|\\s)*%{_humongous_register}(\\r|\\n|\\s)*%{_humongous_reclaim}(\\r|\\n|\\s)*%{_free}(\\r|\\n|\\s)*%{_memory_usage}(\\r|\\n|\\s)*%{_times}\n"},"type":"grok-parser"},{"name":"Define
      timestamp as the official timestamp of the log","is_enabled":true,"sources":["timestamp"],"type":"date-remapper"},{"name":"Define
      level as the official status of the log","is_enabled":true,"sources":["level"],"type":"status-remapper"},{"name":"Define
      dd.trace_id as the official trace id associate to this log","is_enabled":true,"sources":["dd.trace_id"],"type":"trace-id-remapper"},{"name":"stack_trace
      to error.stack","is_enabled":true,"sources":["stack_trace"],"source_type":"attribute","target":"error.stack","target_type":"attribute","preserve_source":false,"override_on_conflict":false,"type":"attribute-remapper"},{"name":"logger_name
      to logger.name","is_enabled":true,"sources":["logger_name","loggerName"],"source_type":"attribute","target":"logger.name","target_type":"attribute","preserve_source":false,"override_on_conflict":false,"type":"attribute-remapper"},{"name":"thread_name
      to logger.thread_name","is_enabled":true,"sources":["thread_name"],"source_type":"attribute","target":"logger.thread_name","target_type":"attribute","preserve_source":false,"override_on_conflict":false,"type":"attribute-remapper"},{"name":"Parsing
      Java Stack traces","is_enabled":true,"source":"error.stack","samples":[],"grok":{"support_rules":"","match_rules":"error_rule
      %{notSpace:error.kind}: %{data:error.message}(\\n|\\t).*\n"},"type":"grok-parser"},{"name":"Calculate
      GC memory freed","is_enabled":true,"expression":"(heap.memory_before - heap.memory_after)","target":"gc.memory_freed","is_replace_missing":false,"type":"arithmetic-processor"},{"name":"Set
      the datadog environemnt tag","is_enabled":true,"sources":["dd.env","contextMap.dd.env"],"source_type":"attribute","target":"env","target_type":"tag","preserve_source":false,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"Set
      the datadog version tag","is_enabled":true,"sources":["dd.version","contextMap.dd.version"],"source_type":"attribute","target":"version","target_type":"tag","preserve_source":false,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"Define
      app as the official service of the log","is_enabled":true,"sources":["dd.service","contextMap.dd.service"],"type":"service-remapper"}]},{"id":"Gl0i6IpdS7m4Mx8pb4rYcg","type":"pipeline","name":"go-client-test-pipeline-1588269419","is_enabled":true,"is_read_only":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"},{"name":"log
      status remapper","is_enabled":false,"sources":["source"],"type":"status-remapper"},{"name":"service
      remapper","is_enabled":false,"sources":["source"],"type":"service-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"type":"message-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"source_type":"tag","target":"target","target_type":"tag","preserve_source":true,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"URL
      parser","is_enabled":false,"sources":["source"],"target":"target","normalize_ending_slashes":false,"type":"url-parser"},{"name":"user
      agent parser","is_enabled":false,"sources":["source"],"target":"target","is_encoded":true,"type":"user-agent-parser"},{"name":"category
      processor","is_enabled":false,"categories":[{"filter":{"query":"query"},"name":"category"}],"target":"target","type":"category-processor"},{"name":"arithmetic
      processor","is_enabled":false,"expression":"foo + bar","target":"target","is_replace_missing":true,"type":"arithmetic-processor"},{"name":"string
      builder processor","is_enabled":false,"template":"template","target":"target","is_replace_missing":true,"type":"string-builder-processor"},{"name":"geo
      IP parser","is_enabled":false,"sources":["source"],"target":"target","ip_processing_behavior":"do-nothing","type":"geo-ip-parser"},{"name":"lookup
      processor","is_enabled":false,"source":"source","target":"target","lookup_table":["key,value"],"default_lookup":"default_lookup","type":"lookup-processor"},{"name":"trace
      remapper","is_enabled":false,"sources":["source"],"type":"trace-id-remapper"},{"type":"pipeline","name":"Test","is_enabled":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"}]}]}]'
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Disposition:
      - inline
      Content-Security-Policy:
      - frame-ancestors 'self'; report-uri https://api.datadoghq.com/csp-report
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Thu, 30 Apr 2020 17:57:00 GMT
      Dd-Pool:
      - dogweb
      Pragma:
      - no-cache
      Set-Cookie:
      - DD-PSHARD=233; Max-Age=604800; Path=/; expires=Thu, 07-May-2020 17:56:59 GMT;
        secure; HttpOnly
      Strict-Transport-Security:
      - max-age=15724800;
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Dd-Debug:
      - nwn8Akm+cp12Jtby9xyfYjHWK2KZDWf5LxY+SMa+2NK6hVIBcKsVHXjynaTEG+o0
      X-Dd-Version:
      - "35.2453376"
      X-Frame-Options:
      - SAMEORIGIN
      X-Ratelimit-Limit:
      - "5000"
      X-Ratelimit-Period:
      - "3600"
      X-Ratelimit-Remaining:
      - "4932"
      X-Ratelimit-Reset:
      - "181"
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
      Dd-Operation-Id:
      - GetLogsPipeline
      User-Agent:
      - datadog-api-client-go/1.0.0-beta.1+dev.1 (go go1.13.4; os darwin; arch amd64)
      X-Datadog-Parent-Id:
      - "4817588243538034504"
      X-Datadog-Sampling-Priority:
      - "1"
      X-Datadog-Trace-Id:
      - "25082008154375994"
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines/Gl0i6IpdS7m4Mx8pb4rYcg
    method: GET
  response:
    body: '{"id":"Gl0i6IpdS7m4Mx8pb4rYcg","type":"pipeline","name":"go-client-test-pipeline-1588269419","is_enabled":true,"is_read_only":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"},{"name":"log
      status remapper","is_enabled":false,"sources":["source"],"type":"status-remapper"},{"name":"service
      remapper","is_enabled":false,"sources":["source"],"type":"service-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"type":"message-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"source_type":"tag","target":"target","target_type":"tag","preserve_source":true,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"URL
      parser","is_enabled":false,"sources":["source"],"target":"target","normalize_ending_slashes":false,"type":"url-parser"},{"name":"user
      agent parser","is_enabled":false,"sources":["source"],"target":"target","is_encoded":true,"type":"user-agent-parser"},{"name":"category
      processor","is_enabled":false,"categories":[{"filter":{"query":"query"},"name":"category"}],"target":"target","type":"category-processor"},{"name":"arithmetic
      processor","is_enabled":false,"expression":"foo + bar","target":"target","is_replace_missing":true,"type":"arithmetic-processor"},{"name":"string
      builder processor","is_enabled":false,"template":"template","target":"target","is_replace_missing":true,"type":"string-builder-processor"},{"name":"geo
      IP parser","is_enabled":false,"sources":["source"],"target":"target","ip_processing_behavior":"do-nothing","type":"geo-ip-parser"},{"name":"lookup
      processor","is_enabled":false,"source":"source","target":"target","lookup_table":["key,value"],"default_lookup":"default_lookup","type":"lookup-processor"},{"name":"trace
      remapper","is_enabled":false,"sources":["source"],"type":"trace-id-remapper"},{"type":"pipeline","name":"Test","is_enabled":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"}]}]}'
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Disposition:
      - inline
      Content-Security-Policy:
      - frame-ancestors 'self'; report-uri https://api.datadoghq.com/csp-report
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Thu, 30 Apr 2020 17:57:00 GMT
      Dd-Pool:
      - dogweb
      Pragma:
      - no-cache
      Set-Cookie:
      - DD-PSHARD=233; Max-Age=604800; Path=/; expires=Thu, 07-May-2020 17:57:00 GMT;
        secure; HttpOnly
      Strict-Transport-Security:
      - max-age=15724800;
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Dd-Debug:
      - OGWvqyuIWnbl6WkXpkkRXBvKLURJhdDx+xXZ6vxnnyjZzYdefkAlNGOfG85GcOUu
      X-Dd-Version:
      - "35.2453376"
      X-Frame-Options:
      - SAMEORIGIN
      X-Ratelimit-Limit:
      - "5000"
      X-Ratelimit-Period:
      - "3600"
      X-Ratelimit-Remaining:
      - "4931"
      X-Ratelimit-Reset:
      - "180"
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: |
      {"filter":{"query":"updated query"},"is_enabled":false,"name":"go-client-test-pipeline-1588269419-updated","processors":[{"is_enabled":false,"name":"log date remapper","sources":["source"],"type":"date-remapper"},{"is_enabled":false,"name":"log status remapper","sources":["source"],"type":"status-remapper"},{"is_enabled":false,"name":"service remapper","sources":["source"],"type":"service-remapper"},{"is_enabled":false,"name":"log message remapper","sources":["source"],"type":"message-remapper"},{"is_enabled":false,"name":"log message remapper","override_on_conflict":true,"preserve_source":true,"source_type":"tag","sources":["source"],"target":"target","target_type":"tag","type":"attribute-remapper"},{"is_enabled":false,"name":"URL parser","normalize_ending_slashes":false,"sources":["source"],"target":"target","type":"url-parser"},{"is_enabled":false,"is_encoded":true,"name":"user agent parser","sources":["source"],"target":"target","type":"user-agent-parser"},{"categories":[{"filter":{"query":"query"},"name":"category"}],"is_enabled":false,"name":"category processor","target":"target","type":"category-processor"},{"expression":"foo + bar","is_enabled":false,"is_replace_missing":true,"name":"arithmetic processor","target":"target","type":"arithmetic-processor"},{"is_enabled":false,"is_replace_missing":true,"name":"string builder processor","target":"target","template":"template","type":"string-builder-processor"},{"is_enabled":false,"name":"geo IP parser","sources":["source"],"target":"target","type":"geo-ip-parser"},{"default_lookup":"default_lookup","is_enabled":false,"lookup_table":["key,value"],"name":"lookup processor","source":"source","target":"target","type":"lookup-processor"},{"is_enabled":false,"name":"trace remapper","sources":["source"],"type":"trace-id-remapper"},{"filter":{"query":"query"},"is_enabled":false,"name":"Test","processors":[{"grok":{"match_rules":"rule1 foo\nrule2 bar","support_rules":"support baz"},"is_enabled":false,"name":"grok parser","samples":["sample"],"source":"src","type":"grok-parser"},{"is_enabled":false,"name":"log date remapper","sources":["source"],"type":"date-remapper"}],"type":"pipeline"},{"grok":{"match_rules":"rule1 foo\nrule2 bar","support_rules":"support baz"},"is_enabled":false,"name":"grok parser","samples":["sample"],"source":"src","type":"grok-parser"}]}
    form: {}
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      Dd-Operation-Id:
      - UpdateLogsPipeline
      User-Agent:
      - datadog-api-client-go/1.0.0-beta.1+dev.1 (go go1.13.4; os darwin; arch amd64)
      X-Datadog-Parent-Id:
      - "3182718513838159676"
      X-Datadog-Sampling-Priority:
      - "1"
      X-Datadog-Trace-Id:
      - "25082008154375994"
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines/Gl0i6IpdS7m4Mx8pb4rYcg
    method: PUT
  response:
    body: '{"id":"Gl0i6IpdS7m4Mx8pb4rYcg","type":"pipeline","name":"go-client-test-pipeline-1588269419-updated","is_enabled":false,"is_read_only":false,"filter":{"query":"updated
      query"},"processors":[{"name":"log date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"},{"name":"log
      status remapper","is_enabled":false,"sources":["source"],"type":"status-remapper"},{"name":"service
      remapper","is_enabled":false,"sources":["source"],"type":"service-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"type":"message-remapper"},{"name":"log
      message remapper","is_enabled":false,"sources":["source"],"source_type":"tag","target":"target","target_type":"tag","preserve_source":true,"override_on_conflict":true,"type":"attribute-remapper"},{"name":"URL
      parser","is_enabled":false,"sources":["source"],"target":"target","normalize_ending_slashes":false,"type":"url-parser"},{"name":"user
      agent parser","is_enabled":false,"sources":["source"],"target":"target","is_encoded":true,"type":"user-agent-parser"},{"name":"category
      processor","is_enabled":false,"categories":[{"filter":{"query":"query"},"name":"category"}],"target":"target","type":"category-processor"},{"name":"arithmetic
      processor","is_enabled":false,"expression":"foo + bar","target":"target","is_replace_missing":true,"type":"arithmetic-processor"},{"name":"string
      builder processor","is_enabled":false,"template":"template","target":"target","is_replace_missing":true,"type":"string-builder-processor"},{"name":"geo
      IP parser","is_enabled":false,"sources":["source"],"target":"target","ip_processing_behavior":"do-nothing","type":"geo-ip-parser"},{"name":"lookup
      processor","is_enabled":false,"source":"source","target":"target","lookup_table":["key,value"],"default_lookup":"default_lookup","type":"lookup-processor"},{"name":"trace
      remapper","is_enabled":false,"sources":["source"],"type":"trace-id-remapper"},{"type":"pipeline","name":"Test","is_enabled":false,"filter":{"query":"query"},"processors":[{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"},{"name":"log
      date remapper","is_enabled":false,"sources":["source"],"type":"date-remapper"}]},{"name":"grok
      parser","is_enabled":false,"source":"src","samples":["sample"],"grok":{"support_rules":"support
      baz","match_rules":"rule1 foo\nrule2 bar"},"type":"grok-parser"}]}'
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Disposition:
      - inline
      Content-Security-Policy:
      - frame-ancestors 'self'; report-uri https://api.datadoghq.com/csp-report
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Thu, 30 Apr 2020 17:57:00 GMT
      Dd-Pool:
      - dogweb
      Pragma:
      - no-cache
      Set-Cookie:
      - DD-PSHARD=233; Max-Age=604800; Path=/; expires=Thu, 07-May-2020 17:57:00 GMT;
        secure; HttpOnly
      Strict-Transport-Security:
      - max-age=15724800;
      Vary:
      - Accept-Encoding
      X-Content-Type-Options:
      - nosniff
      X-Dd-Debug:
      - e/PzE6y8JJ1tlF66uEI2h0RElcpoaXRe9TzYMeQVIADcqTHrHUqcUgRemfbYKGMv
      X-Dd-Version:
      - "35.2453376"
      X-Frame-Options:
      - SAMEORIGIN
      X-Ratelimit-Limit:
      - "100"
      X-Ratelimit-Period:
      - "3600"
      X-Ratelimit-Remaining:
      - "46"
      X-Ratelimit-Reset:
      - "180"
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
      Dd-Operation-Id:
      - DeleteLogsPipeline
      User-Agent:
      - datadog-api-client-go/1.0.0-beta.1+dev.1 (go go1.13.4; os darwin; arch amd64)
      X-Datadog-Parent-Id:
      - "8784613724820061722"
      X-Datadog-Sampling-Priority:
      - "1"
      X-Datadog-Trace-Id:
      - "25082008154375994"
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines/Gl0i6IpdS7m4Mx8pb4rYcg
    method: DELETE
  response:
    body: '{}'
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Disposition:
      - inline
      Content-Length:
      - "2"
      Content-Security-Policy:
      - frame-ancestors 'self'; report-uri https://api.datadoghq.com/csp-report
      Content-Type:
      - application/json;charset=utf-8
      Date:
      - Thu, 30 Apr 2020 17:57:00 GMT
      Dd-Pool:
      - dogweb
      Pragma:
      - no-cache
      Set-Cookie:
      - DD-PSHARD=233; Max-Age=604800; Path=/; expires=Thu, 07-May-2020 17:57:00 GMT;
        secure; HttpOnly
      Strict-Transport-Security:
      - max-age=15724800;
      X-Content-Type-Options:
      - nosniff
      X-Dd-Debug:
      - IWbeot5NPPjwzkLRJwJSrhKxooUYWPiItYmeOu7MvfpEU9kI8879nM2EukYnEnom
      X-Dd-Version:
      - "35.2453376"
      X-Frame-Options:
      - SAMEORIGIN
      X-Ratelimit-Limit:
      - "100"
      X-Ratelimit-Period:
      - "3600"
      X-Ratelimit-Remaining:
      - "45"
      X-Ratelimit-Reset:
      - "180"
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Accept:
      - application/json
      Dd-Operation-Id:
      - DeleteLogsPipeline
      User-Agent:
      - datadog-api-client-go/1.0.0-beta.1+dev.1 (go go1.13.4; os darwin; arch amd64)
      X-Datadog-Parent-Id:
      - "5674259008967439642"
      X-Datadog-Sampling-Priority:
      - "1"
      X-Datadog-Trace-Id:
      - "25082008154375994"
    url: https://api.datadoghq.com/api/v1/logs/config/pipelines/Gl0i6IpdS7m4Mx8pb4rYcg
    method: DELETE
  response:
    body: '{"error":{"code":"InvalidArgument","message":"This pipeline does not exist"}}'
    headers:
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - "77"
      Content-Security-Policy:
      - frame-ancestors 'self'; report-uri https://api.datadoghq.com/csp-report
      Content-Type:
      - application/json
      Date:
      - Thu, 30 Apr 2020 17:57:00 GMT
      Dd-Pool:
      - dogweb
      Pragma:
      - no-cache
      Strict-Transport-Security:
      - max-age=15724800;
      X-Content-Type-Options:
      - nosniff
      X-Dd-Version:
      - "35.2453376"
      X-Frame-Options:
      - SAMEORIGIN
      X-Ratelimit-Limit:
      - "100"
      X-Ratelimit-Period:
      - "3600"
      X-Ratelimit-Remaining:
      - "44"
      X-Ratelimit-Reset:
      - "180"
    status: 400 Bad Request
    code: 400
    duration: ""
