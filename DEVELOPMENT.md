# Development

This repository contains code that is autogenerated via the 
[openapi-generator](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/go-experimental) project. 

As such, this repo should only contain development for adding/fixing tests, for improving dev tooling and for improving 
non client usage doc. 

## Testing

### Prerequisite

Export the following environment variables:
`DD_TEST_CLIENT_API_KEY`: The Datadog API key to run integration tests against
`DD_TEST_CLIENT_APP_KEY`: The Datadog Application key to run integration tests against

**IMPORTANT**: Do not use prod keys.

### Commands

This project contains both Integration and Unit tests.

__Never__ run the test suite against an organization with production data.

Tests can be executed via [`go test`](https://golang.org/pkg/testing/#hdr-Subtests_and_Sub_benchmarks). You can optionally add `-run <testName>` to run individual tests/files.

Use `DEBUG=true go test -v $(go list ./...)` to run tests with `DEBUG` mode on. The `DEBUG` variable will expose all API calls. 

We use mocked server responses (aka cassettes) to run integrations tests.  
You can record cassette locally. We recommend you to do so only for failing tests. Also make sure to use non production API and APP keys.  
Use `DEBUG=true RECORD=true go test -v -run <NAME_OF_FAILING_TEST> ./tests/api/v1/datadog` to run a specific tests with cassette recording on. The `RECORD` variable tell our mocking system to record api calls.
**IMPORTANT**: DO NOT COMMIT cassette recordings since you may expose secrets. During the review process, we will record new cassettes for your PR.
